definition {
	macro changeWebContent {
		Portlet.gotoPortletOptions(
			order = "${order}",
			portletName = "Web Content Display",
			portletOption = "Configuration"
		);

		IFrame.selectDialogFrame();

		Click(locator1 = "Button#CHANGE");

		SelectFrame(value1 = "relative=top");

		IFrame.selectDialogFrame();

		AssertClick(
			locator1 = "Link#WEB_CONTENT_ARTICLE",
			value1 = "${webContentTitle}",
			key_webContentTitle = "${webContentTitle}"
		);

		SelectFrame(value1 = "relative=top");

		IFrame.selectDialogFrame();

		PortletEntry.save();

		SelectFrame(value1 = "relative=top");
	}

	macro configureScopePG {
		Portlet.gotoPortletOptions(
			portletName = "${portletName}",
			portletOption = "Configuration"
		);

		IFrame.selectDialogFrame();

		Navigator.gotoNavItem(navItem = "Scope");

		Select(locator1 = "Select#SCOPE", value1 = "regexp:.*${scopeSelection}.*");

		PortletEntry.save();
	}

	macro configureSetupPG {
		if (isSet(userToolNameList)) {
			IFrame.selectDialogFrame();

			Click(locator1 = "WCDConfiguration#USER_TOOLS_SELECT_BUTTON");

			SelectFrameTop();

			for (var key_toggleCardLabel : list "${userToolNameList}") {
				if (IsNotChecked(locator1 = "WCDConfiguration#TOGGLE_CARD_CHECKBOX")) {
					Click.clickNoWaitForVisible(locator1 = "WCDConfiguration#TOGGLE_CARD_CHECKBOX");
				}
			}

			Click(locator1 = "Button#DONE");
		}

		if (isSet(metadataNameList)) {
			IFrame.selectDialogFrame();

			Click(locator1 = "WCDConfiguration#CONTENT_METADATA_SELECT");

			for (var key_toggleCardLabel : list "${metadataNameList}") {
				Pause(locator1 = "1000");

				SelectFrameTop();

				if (IsNotChecked(locator1 = "WCDConfiguration#TOGGLE_CARD_CHECKBOX")) {
					Click.clickNoWaitForVisible(locator1 = "WCDConfiguration#TOGGLE_CARD_CHECKBOX");
				}
			}

			Click(locator1 = "Button#DONE");
		}

		if ("${enableViewCountIncrement}" == "true") {
			IFrame.selectDialogFrame();

			Check.checkToggleSwitch(
				locator1 = "WCDConfiguration#ENABLE_VIEW_COUNT_INCREMENT_CHECKBOX"
			);

			SelectFrame(value1 = "relative=top");
		}
	}

	macro editTemplate {
		if ("${editTemplateButton}" == "true") {
			WebContentNavigator.gotoLocalizedEditPGViaWCD(
				localizedPortletOption = "Edit Template"
			);
		}
		else {
			WebContentNavigator.gotoEditPGViaWCD();

			Panel.expandPanel(panelHeading = "Structure and Template");

			AssertTextEquals(
				locator1 = "WCEditWebContent#SELECTED_STRUCTURE",
				value1 = "${structureName}"
			);

			ClickNoError(locator1 = "WCEditWebContent#EDIT_TEMPLATE");

			Confirm(value1 = "Editing the current template deletes all unsaved content.");
		}

		SelectFrameTop();

		SelectFrame(locator1 = "IFrame#MODAL_IFRAME");

		Type.clickAtType(locator1 = "TextInput#NAME", value1 = "Template Edit");

		if (isSet(templateScript)) {
			Type.typeAceEditor(
				locator1 = "DDMEditTemplate#SCRIPT_CONTENT_FIELD_TEXT_AREA",
				value1 = "${templateScript}"
			);
		}

		Button.clickSave();

		if ("${editTemplateButton}" == "true") {
			SelectFrame(value1 = "relative=top");
		}
		else {
			Pause(locator1 = "2000");

			Click(locator1 = "Button#CLOSE_IFRAME");

			SelectFrame(value1 = "relative=top");

			SelectFrame(locator1 = "IFrame#MODAL_IFRAME");

			Panel.expandPanel(panelHeading = "Structure and Template");

			AssertTextEquals(
				locator1 = "WCEditWebContent#SELECTED_TEMPLATE",
				value1 = "${templateName}"
			);

			AssertClick.pauseAssertTextClickAt(
				locator1 = "Button#PUBLISH",
				value1 = "Publish"
			);

			SelectFrame(value1 = "relative=top");
		}

		if (isSet(templateScript)) {
			AssertTextEquals(
				locator1 = "WCD#WEB_CONTENT_CONTENT",
				value1 = "${templateScript}"
			);
		}
		else {
			AssertTextEquals(
				locator1 = "WCD#WEB_CONTENT_CONTENT",
				value1 = "${webContentContent}"
			);
		}
	}

	macro saveConfiguration {
		IFrame.selectDialogFrame();

		PortletEntry.save();

		SelectFrame(value1 = "relative=top");
	}

	macro searchWebContent {
		Portlet.gotoPortletOptions(
			portletName = "${portletName}",
			portletOption = "Configuration"
		);

		IFrame.selectDialogFrame();

		if (isSet(webContentSearchValue)) {
			AssertClick(
				locator1 = "WCDConfiguration#SELECT_WEB_CONTENT_BUTTON",
				value1 = "Select"
			);

			SelectFrame(value1 = "relative=top");

			IFrame.selectDialogFrame();

			Type(
				locator1 = "NavBar#BASIC_SEARCH_FIELD",
				value1 = "${webContentSearchValue}"
			);
		}
		else {
			AssertClick(
				locator1 = "WCDConfiguration#SELECT_WEB_CONTENT_BUTTON",
				value1 = "Select"
			);

			SelectFrame(value1 = "relative=top");

			IFrame.selectDialogFrame();

			Type(locator1 = "NavBar#BASIC_SEARCH_FIELD", value1 = "${webContentTitle}");
		}

		Click(locator1 = "Icon#BASIC_SEARCH");

		var key_webContentTitle = "${webContentTitle}";

		AssertTextEquals(
			locator1 = "WCDConfiguration#WEB_CONTENT_TABLE_TITLE",
			value1 = "${webContentTitle}"
		);

		if ("${addSearchedContent}" == "true") {
			AssertClick(locator1 = "Button#WEB_CONTENT_CHOOSE", value1 = "Choose");

			SelectFrame(value1 = "relative=top");

			IFrame.selectDialogFrame();

			AssertTextEquals(
				locator1 = "Message#INFO_ARTICLE",
				value1 = "${webContentTitle} (Modified)"
			);

			PortletEntry.save();
		}

		SelectFrame(value1 = "relative=top");
	}

	macro searchWebContentNo {
		Portlet.gotoPortletOptions(
			portletName = "${portletName}",
			portletOption = "Configuration"
		);

		IFrame.selectDialogFrame();

		AssertClick(
			locator1 = "WCDConfiguration#SELECT_WEB_CONTENT_BUTTON",
			value1 = "Select"
		);

		SelectFrame(value1 = "relative=top");

		IFrame.selectDialogFrame();

		Type(locator1 = "NavBar#BASIC_SEARCH_FIELD", value1 = "${webContentTitle}");

		Click(locator1 = "Icon#BASIC_SEARCH");

		AssertElementNotPresent(
			locator1 = "WCDConfiguration#WEB_CONTENT_TABLE_TITLE",
			key_webContentTitle = "${webContentTitle}"
		);

		SelectFrame(value1 = "relative=top");
	}

	macro selectParentSiteWebContent {
		Portlet.gotoPortletOptions(
			portletName = "Web Content Display",
			portletOption = "Configuration"
		);

		IFrame.selectDialogFrame();

		AssertClick(
			locator1 = "WCDConfiguration#SELECT_WEB_CONTENT_BUTTON",
			value1 = "Select"
		);

		SelectFrame(value1 = "relative=top");

		IFrame.selectDialogFrame();

		Click(locator1 = "Dropdown#FILTER");

		AssertClick(
			locator1 = "Dropdown#FILTER_VALUES",
			value1 = "${parentSiteName}",
			key_filterValue = "${parentSiteName}"
		);

		AssertClick(
			locator1 = "Link#WEB_CONTENT_ARTICLE",
			value1 = "${webContentTitle}",
			key_webContentTitle = "${webContentTitle}"
		);

		SelectFrame(value1 = "relative=top");

		IFrame.selectDialogFrame();

		PortletEntry.save();

		SelectFrame(value1 = "relative=top");

		Click(locator1 = "Icon#CLOSE");
	}

	macro selectWebContent {
		Portlet.gotoPortletOptions(
			order = "${order}",
			portletName = "Web Content Display",
			portletOption = "Configuration"
		);

		IFrame.selectDialogFrame();

		AssertClick(
			locator1 = "WCDConfiguration#SELECT_WEB_CONTENT_BUTTON",
			value1 = "Select"
		);

		SelectFrame(value1 = "relative=top");

		IFrame.selectDialogFrame();

		AssertClick(
			locator1 = "Link#WEB_CONTENT_ARTICLE",
			value1 = "${webContentTitle}",
			key_webContentTitle = "${webContentTitle}"
		);

		SelectFrame(value1 = "relative=top");

		IFrame.selectDialogFrame();

		PortletEntry.save();

		SelectFrame(value1 = "relative=top");
	}

	macro viewAllSettingsEnabledPG {
		AssertTextEquals.assertPartialText(locator1 = "Icon#PRINT", value1 = "Print");

		AssertTextEquals.assertPartialText(
			locator1 = "Comments#SUBSCRIBE_TO_COMMENTS_LINK",
			value1 = "Subscribe to Comments"
		);

		AssertTextEquals.assertPartialText(
			locator1 = "WCD#RELATED_ASSETS",
			value1 = "${relatedAssetTitle}",
			key_assetTitle = "${relatedAssetTitle}"
		);

		Type.typeEditor(locator1 = "Comments#COMMENT_FIELD", value1 = "Hello!");

		AssertClick(locator1 = "Button#REPLY", value1 = "Reply");

		AssertElementPresent(locator1 = "Comments#THUMBS_UP");

		AssertElementPresent(locator1 = "Comments#THUMBS_DOWN");
	}

	macro viewConfigureScopePG {
		var key_portletName = "Web Content Display";

		if ("${scopeSelectionDefault}" == "true") {
			AssertTextEquals(locator1 = "Portlet#TITLE", value1 = "Web Content Display");
		}
		else {
			AssertTextEquals(
				locator1 = "Portlet#TITLE",
				value1 = "Web Content Display (${scopeSelection})"
			);
		}

		Portlet.gotoPortletOptions(
			portletName = "${portletName}",
			portletOption = "Configuration"
		);

		IFrame.selectDialogFrame();

		Navigator.gotoNavItem(navItem = "Scope");

		AssertSelectedLabel(locator1 = "Select#SCOPE", value1 = "${scopeSelection}");
	}

	macro viewContentPageBreak {
		AssertClick(locator1 = "Pagination#PAGE_2", value1 = "2");

		AssertTextEquals(
			locator1 = "WCD#WEB_CONTENT_CONTENT",
			value1 = "${webContentContent}"
		);

		AssertClick(locator1 = "Pagination#PREVIOUS_LINK", value1 = "Previous");
	}

	macro viewDeletedArticlePGViaWCD {
		AssertTextEquals(
			locator1 = "Message#ERROR",
			value1 = "The selected web content no longer exists."
		);
	}

	macro viewEnabledFileTypesPGViaWCD {
		for (var fileType : list "${fileTypes}") {
			var key_fileType = "${fileType}";

			AssertTextEquals.assertPartialText(
				locator1 = "WCD#DOCUMENT_CONVERSION_TYPE",
				value1 = "${fileType}"
			);

			AssertElementPresent(locator1 = "WCD#DOCUMENT_CONVERSION_TYPE_ICON");
		}
	}

	macro viewImageFieldViaWCD {
		SikuliAssertElementPresent(locator1 = "WCD#WEB_CONTENT_IMAGE_PNG");
	}

	macro viewRecycleBinMessage {
		AssertTextEquals.assertPartialText(
			locator1 = "Message#ERROR",
			value1 = "The selected web content no longer exists."
		);
	}
}