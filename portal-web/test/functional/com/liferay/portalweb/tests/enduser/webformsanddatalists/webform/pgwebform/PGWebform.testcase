@component-name = "portal-web-forms-and-data-lists"
definition {
	property osgi.app.includes = "web-form";
	property portal.release = "true";
	property portal.upstream = "true";
	property testray.main.component.name = "Web Form";
	var pageName = "Web Form Test Page";
	var portletName = "Web Form";

	setUp {
		TestCase.setUpPortalInstance();

		User.firstLoginPG();

		Page.add(pageName = "${pageName}");

		Navigator.gotoPage(pageName = "${pageName}");

		Portlet.addPG(portletName = "${portletName}");
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}
		else {
			Page.tearDownPG();
		}
	}

	@priority = "4"
	test EditAndSendWebFormWithRequiredCheckbox {
		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG(
			wfInformationDescription = "Please let us know what you think!",
			wfInformationTitle = "Feed Back"
		);

		WebFormPortlet.editField(wfFieldName = "Name", wfNewFieldName = "Your Name");

		WebFormPortlet.editField(
			wfFieldName = "Rating",
			wfFieldType = "Check Box",
			wfNewFieldName = "Rate Us!"
		);

		WebFormPortlet.editField(
			wfFieldName = "Comments",
			wfNewFieldName = "Additional Comments"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Please let us know what you think!",
			wfInformationTitle = "Feed Back"
		);

		WebForm.viewFormFieldText(wfFieldName = "Your Name");

		WebForm.viewFormFieldCheckBox(wfFieldName = "Rate Us!");

		WebForm.viewFormFieldTextBox(wfFieldName = "Additional Comments");

		WebForm.populateFieldText(wfFieldName = "Your Name", wfFieldValue = "New Name");

		WebForm.populateFieldCheckBox(wfFieldName = "Rate Us!", wfFieldValue = "true");

		WebForm.populateFieldTextBox(
			wfFieldName = "Additional Comments",
			wfFieldValue = "Page Objects + Hashi = Poshi"
		);

		WebForm.sendPG();
	}

	@priority = "4"
	test EditWebForm {
		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldText(wfFieldName = "Name");

		WebForm.viewFormFieldOptions(wfFieldName = "Rating");

		WebForm.viewFormFieldTextBox(wfFieldName = "Comments");

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG(
			wfInformationDescription = "Please let us know what you think!",
			wfInformationTitle = "Feed Back"
		);

		WebFormPortlet.editField(wfFieldName = "Name", wfNewFieldName = "Your Name");

		WebFormPortlet.editField(
			wfFieldName = "Rating",
			wfFieldType = "Check Box",
			wfNewFieldName = "Rate Us!"
		);

		WebFormPortlet.editField(
			wfFieldName = "Comments",
			wfNewFieldName = "Additional Comments"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Please let us know what you think!",
			wfInformationTitle = "Feed Back"
		);

		WebForm.viewFormFieldText(wfFieldName = "Your Name");

		WebForm.viewFormFieldCheckBox(wfFieldName = "Rate Us!");

		WebForm.viewFormFieldTextBox(
			wfFieldName = "Additional Comments",
			wfFieldType = "Text Box"
		);
	}

	@priority = "4"
	test EditWebFormAndViewMultipleFields {
		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldText(wfFieldName = "Name");

		WebForm.viewFormFieldOptions(wfFieldName = "Rating");

		WebForm.viewFormFieldTextBox(wfFieldName = "Comments");

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG(
			wfInformationDescription = "Please let us know what you think!",
			wfInformationTitle = "Feed Back"
		);

		WebFormPortlet.editField(wfFieldName = "Name", wfNewFieldName = "Test 1");

		WebFormPortlet.addField(
			wfFieldName = "Name",
			wfNewFieldName = "Test 2",
			wfPreviousFieldName = "Test 1"
		);

		WebFormPortlet.editField(
			wfFieldName = "Rating",
			wfFieldType = "Check Box",
			wfNewFieldName = "Rate Us!"
		);

		WebFormPortlet.editField(
			wfFieldName = "Comments",
			wfNewFieldName = "Additional Comments"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Please let us know what you think!",
			wfInformationTitle = "Feed Back"
		);

		AssertTextEquals(
			locator1 = "xpath=(//div[contains(@class,'form-group')]/label[contains(@for,'WebFormPortlet')])[1]",
			value1 = "Test 1"
		);

		AssertElementPresent(
			locator1 = "xpath=(//fieldset/div/div[contains(@class,'form-group')]/input[@type='text'])[1]"
		);

		AssertTextEquals(
			locator1 = "xpath=(//div[contains(@class,'form-group')]/label[contains(@for,'WebFormPortlet')])[2]",
			value1 = "Test 2"
		);

		AssertElementPresent(
			locator1 = "xpath=(//fieldset/div/div[contains(@class,'form-group')]/input[@type='text'])[2]"
		);

		AssertTextEquals(
			locator1 = "xpath=(//div[contains(@class,'form-group')]/label[contains(@for,'WebFormPortlet')])[3]",
			value1 = "Rate Us!"
		);

		AssertElementPresent(
			locator1 = "//div[contains(@class,'checkbox')]//input[@type='checkbox']"
		);

		AssertTextEquals(
			locator1 = "xpath=(//div[contains(@class,'form-group')]/label[contains(@for,'WebFormPortlet')])[4]",
			value1 = "Additional Comments"
		);

		AssertElementPresent(
			locator1 = "//fieldset/div/div[contains(@class,'form-group')]/textarea"
		);
	}

	@priority = "3"
	test EditWebFormAndViewOptionalCheckBoxField {
		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG();

		WebFormPortlet.deleteEditableField(wfFieldName = "Name");

		WebFormPortlet.deleteEditableField(wfFieldName = "Rating");

		WebFormPortlet.deleteEditableField(wfFieldName = "Comments");

		WebFormPortlet.editField(
			optional = "true",
			wfFieldName = "New Item",
			wfFieldType = "Check Box",
			wfNewFieldName = "Test Check Box Field"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldCheckBox(wfFieldName = "Test Check Box Field");

		WebForm.sendPG();
	}

	@priority = "4"
	test EditWebFormAndViewOptionalOptionsField {
		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG();

		WebFormPortlet.deleteEditableField(wfFieldName = "Name");

		WebFormPortlet.deleteEditableField(wfFieldName = "Rating");

		WebFormPortlet.deleteEditableField(wfFieldName = "Comments");

		WebFormPortlet.editField(
			optional = "true",
			wfFieldName = "New Item",
			wfFieldType = "Options",
			wfNewFieldName = "Test Options Field"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldOptions(wfFieldName = "Test Options Field");

		WebForm.sendPG();
	}

	@priority = "4"
	test EditWebFormAndViewOptionalRadioField {
		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG();

		WebFormPortlet.deleteEditableField(wfFieldName = "Name");

		WebFormPortlet.deleteEditableField(wfFieldName = "Rating");

		WebFormPortlet.deleteEditableField(wfFieldName = "Comments");

		WebFormPortlet.editField(
			optional = "true",
			optionsList = "1,2,3",
			wfFieldName = "New Item",
			wfFieldType = "Radio Buttons",
			wfNewFieldName = "Test Radio Field"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldRadio(
			optionsList = "1,2,3",
			wfFieldName = "Test Radio Field"
		);

		WebForm.sendPG();
	}

	@priority = "3"
	test EditWebFormAndViewOptionalTextBoxField {
		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG();

		WebFormPortlet.deleteEditableField(wfFieldName = "Name");

		WebFormPortlet.deleteEditableField(wfFieldName = "Rating");

		WebFormPortlet.deleteEditableField(wfFieldName = "Comments");

		WebFormPortlet.editField(
			optional = "true",
			wfFieldName = "New Item",
			wfFieldType = "Text Box",
			wfNewFieldName = "Test Text Box Field"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldTextBox(wfFieldName = "Test Text Box Field");

		WebForm.sendPG();
	}

	@priority = "4"
	test EditWebFormAndViewOptionalTextField {
		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG();

		WebFormPortlet.deleteEditableField(wfFieldName = "Name");

		WebFormPortlet.deleteEditableField(wfFieldName = "Rating");

		WebFormPortlet.deleteEditableField(wfFieldName = "Comments");

		WebFormPortlet.editField(
			optional = "true",
			wfFieldName = "New Item",
			wfFieldType = "Text",
			wfNewFieldName = "Test Text Field"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldText(wfFieldName = "Test Text Field");

		WebForm.sendPG();
	}

	@priority = "4"
	test EditWebFormAndViewParagraphField {
		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG();

		WebFormPortlet.deleteEditableField(wfFieldName = "Name");

		WebFormPortlet.deleteEditableField(wfFieldName = "Rating");

		WebFormPortlet.deleteEditableField(wfFieldName = "Comments");

		WebFormPortlet.editField(
			wfFieldName = "New Item",
			wfFieldType = "Paragraph",
			wfNewFieldName = "Test Paragraph Field"
		);

		WebFormPortlet.editParagraphField(
			wfNewFieldName = "Test Paragraph Field",
			wfParagraphFieldText = "Hello Liferay. This is the Test Paragraph Field."
		);

		WebFormPortlet.addField(
			wfFieldType = "Text",
			wfNewFieldName = "Test Text Field",
			wfPreviousFieldName = "Test Paragraph Field"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldParagraph(
			wfParagraphFieldText = "Hello Liferay. This is the Test Paragraph Field."
		);

		WebForm.viewFormFieldText(wfFieldName = "Test Text Field");

		WebForm.populateFieldText(
			wfFieldName = "Test Text Field",
			wfFieldValue = "Welcome to Liferay."
		);

		WebForm.sendPG();
	}

	@priority = "3"
	test EditWebFormAndViewRequiredCheckBoxField {
		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG();

		WebFormPortlet.deleteEditableField(wfFieldName = "Name");

		WebFormPortlet.deleteEditableField(wfFieldName = "Rating");

		WebFormPortlet.deleteEditableField(wfFieldName = "Comments");

		WebFormPortlet.editField(
			wfFieldName = "New Item",
			wfFieldType = "Check Box",
			wfNewFieldName = "Test Check Box Field"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldCheckBox(wfFieldName = "Test Check Box Field");

		WebForm.sendBlankPG();

		WebForm.populateFieldCheckBox(
			wfFieldName = "Test Check Box Field",
			wfFieldValue = "true"
		);

		WebForm.sendPG();
	}

	@priority = "4"
	test EditWebFormAndViewRequiredOptionsField {
		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG();

		WebFormPortlet.deleteEditableField(wfFieldName = "Name");

		WebFormPortlet.deleteEditableField(wfFieldName = "Rating");

		WebFormPortlet.deleteEditableField(wfFieldName = "Comments");

		WebFormPortlet.editField(
			wfFieldName = "New Item",
			wfFieldType = "Options",
			wfNewFieldName = "Test Options Field"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldOptions(wfFieldName = "Test Options Field");

		WebForm.sendBlankPG();

		WebFormPortlet.configureSetupFormFieldsPG();

		WebFormPortlet.editField(
			optionsList = "1,2,3",
			wfFieldName = "Test Options Field",
			wfFieldType = "Options",
			wfNewFieldName = "Test Options Field"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewFormFieldOptions(wfFieldName = "Test Options Field");

		WebForm.sendPG();
	}

	@priority = "3"
	test EditWebFormAndViewRequiredRadioField {
		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG();

		WebFormPortlet.deleteEditableField(wfFieldName = "Name");

		WebFormPortlet.deleteEditableField(wfFieldName = "Rating");

		WebFormPortlet.deleteEditableField(wfFieldName = "Comments");

		WebFormPortlet.editField(
			optionsList = "1,2,3",
			wfFieldName = "New Item",
			wfFieldType = "Radio Buttons",
			wfNewFieldName = "Test Radio Field"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldRadio(
			optionsList = "1,2,3",
			wfFieldName = "Test Radio Field"
		);

		WebForm.sendBlankPG();

		WebForm.populateFieldRadio(wfFieldName = "Test Radio Field", wfFieldValue = "2");

		WebForm.sendPG();
	}

	@priority = "3"
	test EditWebFormAndViewRequiredTextBoxField {
		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG();

		WebFormPortlet.deleteEditableField(wfFieldName = "Name");

		WebFormPortlet.deleteEditableField(wfFieldName = "Rating");

		WebFormPortlet.deleteEditableField(wfFieldName = "Comments");

		WebFormPortlet.editField(
			wfFieldName = "New Item",
			wfFieldType = "Text Box",
			wfNewFieldName = "Test Text Box Field"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldTextBox(wfFieldName = "Test Text Box Field");

		WebForm.sendBlankPG();

		WebForm.populateFieldTextBox(
			wfFieldName = "Test Text Box Field",
			wfFieldValue = "Page Objects + Hashi = Poshi"
		);

		WebForm.sendPG();
	}

	@priority = "4"
	test EditWebFormAndViewRequiredTextField {
		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		Navigator.gotoPage(pageName = "${pageName}");

		WebFormPortlet.configureSetupFormFieldsPG();

		WebFormPortlet.deleteEditableField(wfFieldName = "Name");

		WebFormPortlet.deleteEditableField(wfFieldName = "Rating");

		WebFormPortlet.deleteEditableField(wfFieldName = "Comments");

		WebFormPortlet.editField(
			wfFieldName = "New Item",
			wfFieldType = "Text",
			wfNewFieldName = "Test Text Field"
		);

		WebFormPortlet.saveConfiguration();

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.viewPG(
			wfInformationDescription = "Your input is valuable to us. Please send us your suggestions.",
			wfInformationTitle = "Suggestions"
		);

		WebForm.viewFormFieldText(wfFieldName = "Test Text Field");

		WebForm.sendBlankPG();

		WebForm.populateFieldText(
			wfFieldName = "Test Text Field",
			wfFieldValue = "Hello"
		);

		WebForm.sendPG();
	}

	@priority = "4"
	test SendWebForm {
		Navigator.gotoPage(pageName = "${pageName}");

		Portlet.gotoPortletOptions(portletOption = "Configuration");

		SelectFrame(locator1 = "WebFormConfiguration#CONFIGURATION_IFRAME");

		WebFormPortlet.viewEditableField(wfFieldName = "Name");

		WebFormPortlet.viewEditableField(wfFieldName = "Rating");

		WebFormPortlet.viewEditableField(wfFieldName = "Comments");

		SelectFrameTop(value1 = "relative=top");

		Navigator.gotoPage(pageName = "${pageName}");

		WebForm.populateFieldText(wfFieldName = "Name", wfFieldValue = "Test Test");

		WebForm.populateFieldOptions(wfFieldName = "Rating", wfFieldValue = "Excellent");

		WebForm.populateFieldTextBox(
			wfFieldName = "Comments",
			wfFieldValue = "Page Objects + Hashi = Poshi"
		);

		WebForm.sendPG();

		Navigator.gotoPage(pageName = "${pageName}");

		Portlet.gotoPortletOptions(portletOption = "Configuration");

		SelectFrame(locator1 = "WebFormConfiguration#CONFIGURATION_IFRAME");

		AssertTextEquals(
			locator1 = "WebFormConfiguration#SETUP_FORM_FIELDS_INFO_MESSAGE",
			value1 = "There is existing form data. Please export and delete it before making changes to the fields."
		);

		WebFormPortlet.viewEditableFieldNotPresent(wfFieldName = "Name");

		WebFormPortlet.viewSubmittedField(wfFieldName = "Name", wfFieldType = "Text");

		WebFormPortlet.viewEditableFieldNotPresent(wfFieldName = "Rating");

		WebFormPortlet.viewSubmittedField(
			optionsList = "Excellent,Good,Satisfactory,Poor",
			wfFieldName = "Rating",
			wfFieldType = "Options"
		);

		WebFormPortlet.viewEditableFieldNotPresent(wfFieldName = "Comments");

		WebFormPortlet.viewSubmittedField(
			wfFieldName = "Comments",
			wfFieldType = "Text Box"
		);

		SelectFrameTop(value1 = "relative=top");
	}
}