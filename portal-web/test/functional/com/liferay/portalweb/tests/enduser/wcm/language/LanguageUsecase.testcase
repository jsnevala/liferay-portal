@component-name = "portal-wcm"
definition {
	property portal.release = "true";
	property portal.upstream = "true";
	property testray.main.component.name = "Localization";

	setUp {
		TestCase.setUpPortalInstance();

		User.firstLoginPG();

		ProductMenu.gotoPortlet(
			category = "Sites",
			panel = "Control Panel",
			portlet = "Sites"
		);

		Site.addBlankCP(siteName = "Site Name");

		ProductMenu.gotoPortlet(
			category = "Sites",
			panel = "Control Panel",
			portlet = "Sites"
		);

		Page.add(pageName = "Test Page Name", siteName = "Site Name");
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}
		else {
			Site.tearDownCP();
		}
	}

	@priority = "4"
	test AddWCWithMultipleTranslations {
		property test.name.skip.portal.instance = "LanguageUsecase#AddWCWithMultipleTranslations";

		ProductMenu.gotoSite(site = "Site Name");

		ProductMenu.gotoPortlet(
			category = "Content",
			panel = "Site Administration",
			portlet = "Web Content"
		);

		WebContentNavigator.gotoAddCP();

		WebContent.addWithThreeTranslations();

		PortletEntry.publish();

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		Portlet.addPG(portletName = "Language Selector");

		Refresh();

		Portlet.addPG(portletName = "Web Content Display");

		WebContentDisplayPortlet.selectWebContent(webContentTitle = "WC Title");

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		LanguagePortlet.selectLanguagePG(language = "Spanish (Spain)");

		Refresh();

		WebContent.viewPGViaWCD(webContentContent = "WC Contenido");

		WebContentNavigator.gotoLocalizedEditPGViaWCD(
			localizedPortletOption = "Editar contenido web"
		);

		WebContent.viewTranslationPGViaWCD(
			localizedTitle = "WC Titulo",
			webContentTranslationLanguage = "español (España)"
		);

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		Refresh();

		LanguagePortlet.selectLanguagePG(language = "German (Germany)");

		Refresh();

		WebContent.viewPGViaWCD(webContentContent = "WC Inhalt");

		WebContentNavigator.gotoLocalizedEditPGViaWCD(
			localizedPortletOption = "Webcontent bearbeiten"
		);

		WebContent.viewTranslationPGViaWCD(
			localizedTitle = "WC Titel",
			webContentTranslationLanguage = "Deutsch (Deutschland)"
		);

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		Refresh();

		LanguagePortlet.selectLanguagePG(language = "Finnish (Finland)");

		Refresh();

		WebContent.viewPGViaWCD(webContentContent = "WC Pitoisuus");

		WebContentNavigator.gotoLocalizedEditPGViaWCD(
			localizedPortletOption = "Muokkaa web-sisältöä"
		);

		WebContent.viewTranslationPGViaWCD(
			localizedTitle = "WC Otsikko",
			webContentTranslationLanguage = "suomi (Suomi)"
		);
	}

	@priority = "5"
	test AddWCWithTranslation {
		property portal.acceptance = "true";
		property test.name.skip.portal.instance = "LanguageUsecase#AddWCWithTranslation";

		ProductMenu.gotoSite(site = "Site Name");

		ProductMenu.gotoPortlet(
			category = "Content",
			panel = "Site Administration",
			portlet = "Web Content"
		);

		WebContentNavigator.gotoAddCP();

		WebContent.addCP(webContentContent = "WC Content", webContentTitle = "WC Title");

		WebContent.addTranslation(
			localizedContent = "WC Contenido",
			localizedLanguage = "Spanish (Spain)",
			localizedTitle = "WC Titulo",
			webContentTitle = "WC Title"
		);

		PortletEntry.publish();

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		Portlet.addPG(portletName = "Language Selector");

		Refresh();

		Portlet.addPG(portletName = "Web Content Display");

		WebContentDisplayPortlet.selectWebContent(webContentTitle = "WC Title");

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		Navigator.openSiteURL(siteName = "Site Name");

		LanguagePortlet.selectLanguagePG(language = "Spanish (Spain)");

		Navigator.openSiteURL(siteName = "Site Name");

		WebContent.viewPGViaWCD(webContentContent = "WC Contenido");

		WebContentNavigator.gotoLocalizedEditPGViaWCD(
			localizedPortletOption = "Editar contenido web"
		);

		WebContent.viewTranslationPGViaWCD(
			localizedTitle = "WC Titulo",
			webContentTranslationLanguage = "español (España)"
		);
	}

	@priority = "4"
	test MoveCurrentLanguagesToAvailable {
		property test.name.skip.portal.instance = "LanguageUsecase#MoveCurrentLanguagesToAvailable";

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		Portlet.addPG(portletName = "Language Selector");

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		Portlet.gotoPortletOptions(portletOption = "Configuration");

		LanguagePortlet.moveLanguagesToAvailable();

		LanguagePortlet.moveLanguagesToCurrent(
			currentLanguages = "English (United States),German (Germany),Spanish (Spain)"
		);

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		LanguagePortlet.viewLanguagesAbsent(
			missingLanguages = "ARABIC,CHINESE,FRENCH,HUNGARIAN,JAPANESE,PORTUGUESE"
		);

		LanguagePortlet.viewLanguagesPresent(
			currentLanguages = "ENGLISH,GERMAN,SPANISH"
		);
	}

	@priority = "4"
	test ViewChangedDefaultPortalLanguageViaWebContent {
		property test.name.skip.portal.instance = "LanguageUsecase#ViewChangedDefaultPortalLanguageViaWebContent";

		ProductMenu.gotoPortlet(
			category = "Configuration",
			panel = "Control Panel",
			portlet = "Instance Settings"
		);

		PortalSettings.configureCurrentLanguagesCP(
			defaultPortalLanguage = "Spanish (Spain)"
		);

		ProductMenu.gotoSite(site = "Site Name");

		ProductMenu.gotoPortlet(
			category = "Content",
			panel = "Site Administration",
			portlet = "Web Content"
		);

		WebContentNavigator.gotoAddCP();

		WebContent.viewDefaultLanguage(localizedLanguage = "Spanish (Spain)");
	}

	@priority = "4"
	test ViewDisplayOptionsViaLanguagePortlet {
		property test.name.skip.portal.instance = "LanguageUsecase#ViewDisplayOptionsViaLanguagePortlet";

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		Portlet.addPG(portletName = "Language Selector");

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		Portlet.gotoPortletOptions(portletOption = "Configuration");

		LanguagePortlet.toggleDisplayTemplate(displayStyle = "Icon Menu");

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		LanguagePortlet.viewDisplayTemplateIconMenu(language = "Deutsch");

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		Portlet.gotoPortletOptions(portletOption = "Configuration");

		LanguagePortlet.toggleDisplayTemplate(displayStyle = "Long Text");

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		LanguagePortlet.viewDisplayTemplateLongText(language = "suomi");

		Portlet.gotoPortletOptions(portletOption = "Configuration");

		LanguagePortlet.toggleDisplayTemplate(displayStyle = "Select Box");

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		LanguagePortlet.viewDisplayTemplateSelectBox(language = "English");

		Portlet.gotoPortletOptions(portletOption = "Configuration");

		LanguagePortlet.toggleDisplayTemplate(displayStyle = "Short Text");

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		LanguagePortlet.viewDisplayTemplateShortText(languageKey = "HU");
	}

	@priority = "4"
	test ViewRemovedCurrentPortalLanguagesViaLanguagePortlet {
		property test.name.skip.portal.instance = "LanguageUsecase#ViewRemovedCurrentPortalLanguagesViaLanguagePortlet";

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		Portlet.addPG(portletName = "Language Selector");

		ProductMenu.gotoPortlet(
			category = "Configuration",
			panel = "Control Panel",
			portlet = "Instance Settings"
		);

		PortalSettings.configureCurrentLanguagesCP(
			currentPortalLanguages = "Chinese (China),English (United States),French (France)"
		);

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		LanguagePortlet.viewLanguagesAbsent(
			missingLanguages = "ARABIC,GERMAN,HUNGARIAN,JAPANESE,PORTUGUESE,SPANISH"
		);

		LanguagePortlet.viewLanguagesPresent(
			currentLanguages = "CHINESE,FRENCH,ENGLISH"
		);

		Portlet.gotoPortletOptions(portletOption = "Configuration");

		LanguagePortlet.configureViewCurrentLanguages(
			currentLanguages = "Chinese (China),French (France),English (United States)"
		);
	}

	@priority = "4"
	test ViewRemovedCurrentSiteLanguagesViaLanguagePortlet {
		property test.name.skip.portal.instance = "LanguageUsecase#ViewRemovedCurrentSiteLanguagesViaLanguagePortlet";

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		Portlet.addPG(portletName = "Language Selector");

		ProductMenu.gotoSite(site = "Site Name");

		ProductMenu.gotoPortlet(
			category = "Configuration",
			panel = "Site Administration",
			portlet = "Site Settings"
		);

		Site.configureCurrentLanguagesCP(
			currentSiteLanguages = "English (United States),German (Germany),Spanish (Spain)",
			defaultSiteLanguage = "English (United States)",
			displaySettings = "Display Settings"
		);

		Navigator.gotoSitePage(pageName = "Test Page Name", siteName = "Site Name");

		LanguagePortlet.viewLanguagesAbsent(
			missingLanguages = "CHINESE,FRENCH,HUNGARIAN,JAPANESE,PORTUGUESE"
		);

		LanguagePortlet.viewLanguagesPresent(
			currentLanguages = "ENGLISH,GERMAN,SPANISH"
		);

		Portlet.gotoPortletOptions(portletOption = "Configuration");

		LanguagePortlet.configureViewCurrentLanguages(
			currentLanguages = "English (United States),German (Germany),Spanish (Spain)"
		);
	}
}