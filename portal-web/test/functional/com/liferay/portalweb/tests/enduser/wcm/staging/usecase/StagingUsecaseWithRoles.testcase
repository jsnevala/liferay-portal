@component-name = "portal-staging"
definition {
	property portal.release = "true";
	property portal.upstream = "true";
	property testray.main.component.name = "Staging";
	var siteName = "Site Name";

	setUp {
		TestCase.setUpPortalInstance();

		User.firstLoginPG();

		ProductMenu.gotoPortlet(
			category = "Sites",
			panel = "Control Panel",
			portlet = "Sites"
		);

		Site.addBlankCP(siteName = "Site Name");

		ProductMenu.gotoPortlet(
			category = "Sites",
			panel = "Control Panel",
			portlet = "Sites"
		);

		Page.add(pageName = "Staging Test Page", siteName = "Site Name");
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}
		else {
			User.logoutAndLoginPG(
				userLoginEmailAddress = "test@liferay.com",
				userLoginFullName = "Test Test"
			);

			User.deactivateCP(userFirstName = "userfn");

			User.deleteCP();

			Role.tearDownCP();

			Site.tearDownCP();
		}
	}

	@priority = "4"
	test StagingDemoLocalLive1 {
		Navigator.openSiteURL(siteName = "Site Name");

		ProductMenu.gotoPortlet(
			category = "Publishing",
			panel = "Site Administration",
			portlet = "Staging"
		);

		Staging.activateStagingCP(siteName = "Site Name");

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Roles"
		);

		Role.addStagingAdminRole();

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Roles"
		);

		Role.definePermissionCmdCP(
			permissionDefinitionKey = "SITE_ADMIN_APPLICATIONS_DOCUMENTS_AND_MEDIA_RESOURCE_PERMISSIONS_DOCUMENT_ACTION_CHECKBOX",
			permissionDefinitionValue = "Action",
			permissionNavigationKey = "SITE_ADMIN_CONTENT_DOCUMENTS_AND_MEDIA",
			permissionNavigationValue = "Documents and Media",
			roleName = "Staging Admin",
			roleType = "Site"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.addCP(
			userEmailAddress = "userea@liferay.com",
			userFirstName = "userfn",
			userLastName = "userln",
			userScreenName = "usersn"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.editPasswordCP(
			password = "password",
			userEmailAddress = "userea@liferay.com",
			userScreenName = "usersn"
		);

		Navigator.openSiteURL(siteName = "Site Name");

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignUserAsMemberCP(
			userFirstName = "userfn",
			userLastName = "userln",
			userScreenName = "usersn"
		);

		Navigator.openSiteURL(siteName = "Site Name");

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignSiteRoleCP(
			resourceName = "userfn userln",
			roleName = "Staging Admin"
		);

		User.logoutAndLoginPG(
			userLoginEmailAddress = "userea@liferay.com",
			userLoginFullName = "userfn userln"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name"
		);

		Portlet.addPG(portletName = "Documents and Media");

		DMDocument.addPG(
			dmDocumentDescription = "DM Document Description",
			dmDocumentFile = "Document_1.doc",
			dmDocumentTitle = "DM Document Title"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name"
		);

		Staging.gotoPublishToLive();

		Staging.configurePublishToLive(uncheckContentNameList = "Documents and Media");

		Staging.publishToLive();

		Navigator.gotoSitePage(pageName = "Staging Test Page", siteName = "Site Name");

		DMPortlet.viewDefaultPG();

		Navigator.gotoSitePage(pageName = "Staging Test Page", siteName = "Site Name");

		Navigator.gotoStagedView();

		Staging.gotoPublishToLive();

		Staging.configurePublishToLive(
			checkContentNameList = "Documents and Media",
			contentDateRange = "All"
		);

		Staging.publishToLive();

		Navigator.gotoSitePage(pageName = "Staging Test Page", siteName = "Site Name");

		DMDocument.viewPG(
			dmDocumentDescription = "DM Document Description",
			dmDocumentTitle = "DM Document Title"
		);
	}

	@priority = "4"
	test StagingDemoLocalLive2 {
		ProductMenu.gotoPortlet(
			category = "Sites",
			panel = "Control Panel",
			portlet = "Sites"
		);

		Site.addCommunityCP(
			siteName = "Community Site Name",
			uncheckPropagation = "true"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		ProductMenu.gotoPortlet(
			category = "Publishing",
			panel = "Site Administration",
			portlet = "Staging"
		);

		Staging.activateStagingCP(
			pageVersioningEnabled = "true",
			siteName = "Community Site Name"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Roles"
		);

		Role.addStagingAdminRole();

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.addCP(
			userEmailAddress = "userea@liferay.com",
			userFirstName = "userfn",
			userLastName = "userln",
			userScreenName = "usersn"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.editPasswordCP(
			password = "password",
			userEmailAddress = "userea@liferay.com",
			userScreenName = "usersn"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignUserAsMemberCP(
			userFirstName = "userfn",
			userLastName = "userln",
			userScreenName = "usersn"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignSiteRoleCP(
			resourceName = "userfn userln",
			roleName = "Staging Admin"
		);

		User.logoutAndLoginPG(
			userLoginEmailAddress = "userea@liferay.com",
			userLoginFullName = "userfn userln"
		);

		Navigator.gotoSitePage(pageName = "Home", siteName = "Community Site Name");

		Navigator.gotoStagedView();

		SitePageNavigator.gotoEditPage(page = "Home");

		Page.editPageLayoutColumn(columnName = "1 Column");

		SitePageNavigator.gotoPages(site = "Community Site Name");

		SitePageNavigator.gotoEditPage(page = "Home");

		Page.viewPageLayoutColumn(columnName = "1 Column");

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.undoStagingPageVersioningPG();

		SitePageNavigator.gotoEditPage(page = "Home");

		Page.viewPageLayoutColumn(columnName = "2 Columns");

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.redoStagingPageVersioningPG();

		SitePageNavigator.gotoEditPage(page = "Home");

		Page.viewPageLayoutColumn(columnName = "1 Column");

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		SitePageNavigator.gotoEditPage(page = "Home");

		Page.viewPageLayoutColumn(columnName = "1 Column");
	}

	@priority = "4"
	test StagingDemoLocalLive3 {
		ProductMenu.gotoPortlet(
			category = "Sites",
			panel = "Control Panel",
			portlet = "Sites"
		);

		Site.addCommunityCP(
			siteName = "Community Site Name",
			uncheckPropagation = "true"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		ProductMenu.gotoPortlet(
			category = "Publishing",
			panel = "Site Administration",
			portlet = "Staging"
		);

		Staging.activateStagingCP(
			pageVersioningEnabled = "true",
			siteName = "Community Site Name"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Roles"
		);

		Role.addStagingAdminRole();

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.addCP(
			userEmailAddress = "userea@liferay.com",
			userFirstName = "userfn",
			userLastName = "userln",
			userScreenName = "usersn"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.editPasswordCP(
			password = "password",
			userEmailAddress = "userea@liferay.com",
			userScreenName = "usersn"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignUserAsMemberCP(
			userFirstName = "userfn",
			userLastName = "userln",
			userScreenName = "usersn"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignSiteRoleCP(
			resourceName = "userfn userln",
			roleName = "Staging Admin"
		);

		User.logoutAndLoginPG(
			userLoginEmailAddress = "userea@liferay.com",
			userLoginFullName = "userfn userln"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.editSitePageVariationPG(sitePagesVariationName = "Main Variation");

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.viewEditedSitePagesVariationPG(
			sitePagesVariationName = "Main Variation Edit"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.addSitePagesVariationPG(
			copySitePagesVariationName = "Main Variation Edit",
			sitePagesVariationName = "Christmas Variation"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.viewSitePagesVariationPG(sitePagesVariationName = "Christmas Variation");

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Page.view(pageName = "Home");

		Navigator.gotoStagedSitePage(
			pageName = "Wiki",
			siteName = "Community Site Name"
		);

		Page.view(pageName = "Wiki");

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Page.add(pageName = "Test Page Name");

		Staging.changeSitePageVariationPG(
			sitePagesVariationMenulistName = "Main Variation Edit",
			sitePagesVariationName = "Christmas Variation"
		);

		Staging.enablePageInSitePagesVariation(
			pageName = "Test Page Name",
			sitePagesVariationName = "Main Variation Edit"
		);

		Staging.viewSitePagesVariationPG(sitePagesVariationName = "Main Variation Edit");

		Navigator.gotoStagedSitePage(
			pageName = "Test Page Name",
			siteName = "Community Site Name"
		);

		Page.view(pageName = "Test Page Name");

		Page.deletePG(pageName = "Home");

		Staging.changeSitePageVariationPG(
			sitePagesVariationMenulistName = "Christmas Variation",
			sitePagesVariationName = "Main Variation Edit"
		);

		Staging.viewSitePagesVariationPG(sitePagesVariationName = "Christmas Variation");

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Page.view(pageName = "Home");

		Navigator.gotoStagedSitePage(
			pageName = "Test Page Name",
			siteName = "Community Site Name"
		);

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.gotoSitePage(
			pageName = "Test Page Name",
			siteName = "Community Site Name"
		);

		Staging.viewStagingLocalLiveVariationMessagePG(
			pageName = "Test Page Name",
			sitePagesVariationName = "Christmas Variation"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Test Page Name",
			siteName = "Community Site Name"
		);

		Staging.addSitePagesVariationPG(
			copySitePagesVariationName = "None (Empty Site Pages Variation)",
			sitePagesVariationName = "Empty Variation"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Page.add(pageName = "Empty Page Name", siteScopeSelected = "true");

		Staging.viewSitePagesVariationPG(sitePagesVariationName = "Empty Variation");

		Navigator.gotoStagedSitePage(
			pageName = "Empty Page Name",
			siteName = "Community Site Name"
		);

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.gotoSitePage(
			pageName = "Empty Page Name",
			siteName = "Community Site Name"
		);

		Staging.viewStagingLocalLiveVariationMessagePG(
			pageName = "Empty Page Name",
			sitePagesVariationName = "Empty Variation"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Empty Page Name",
			siteName = "Community Site Name"
		);

		Staging.mergeSitePagesVariation(
			sitePagesVariationMergeName = "Christmas Variation",
			sitePagesVariationName = "Empty Variation"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.viewSitePagesVariationPG(sitePagesVariationName = "Empty Variation");

		Page.view(pageName = "Home");

		Navigator.gotoStagedSitePage(
			pageName = "Wiki",
			siteName = "Community Site Name"
		);

		Staging.viewSitePagesVariationPG(sitePagesVariationName = "Empty Variation");

		Page.view(pageName = "Wiki");

		Navigator.gotoStagedSitePage(
			pageName = "Test Page Name",
			siteName = "Community Site Name"
		);

		Staging.viewSitePagesVariationPG(sitePagesVariationName = "Empty Variation");

		Page.view(pageName = "Test Page Name");
	}

	@priority = "4"
	test StagingDemoLocalLive4 {
		ProductMenu.gotoPortlet(
			category = "Sites",
			panel = "Control Panel",
			portlet = "Sites"
		);

		Site.addCommunityCP(
			siteName = "Community Site Name",
			uncheckPropagation = "true"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		ProductMenu.gotoPortlet(
			category = "Publishing",
			panel = "Site Administration",
			portlet = "Staging"
		);

		Staging.activateStagingCP(
			pageVersioningEnabled = "true",
			siteName = "Community Site Name"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Roles"
		);

		Role.addStagingAdminRole();

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.addCP(
			userEmailAddress = "userea@liferay.com",
			userFirstName = "userfn",
			userLastName = "userln",
			userScreenName = "usersn"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.editPasswordCP(
			password = "password",
			userEmailAddress = "userea@liferay.com",
			userScreenName = "usersn"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignUserAsMemberCP(
			userFirstName = "userfn",
			userLastName = "userln",
			userScreenName = "usersn"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignSiteRoleCP(
			resourceName = "userfn userln",
			roleName = "Staging Admin"
		);

		User.logoutAndLoginPG(
			userLoginEmailAddress = "userea@liferay.com",
			userLoginFullName = "userfn userln"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.addSitePagesVariationPG(
			copySitePagesVariationName = "Main Variation",
			sitePagesVariationName = "New Variation"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Page.deletePG(pageName = "Wiki");

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.gotoPublishToLive();

		Staging.configurePublishToLive(deleteMissingPages = "true");

		Staging.publishToLive();

		Navigator.gotoSitePage(pageName = "Home", siteName = "Community Site Name");

		AssertTextNotPresent(locator1 = "Home#PAGE_2", value1 = "Wiki");

		Navigator.gotoSitePage(pageName = "Home", siteName = "Community Site Name");

		Page.add(pageName = "New Page Name", pageStaging = "true");

		Staging.schedulePublishToLivePG(scheduleTitleName = "Staging Schedule Title");

		Navigator.gotoSitePage(pageName = "Home", siteName = "Community Site Name");

		AssertTextNotPresent(
			locator1 = "Home#PAGE_2_GUEST_VIEW",
			value1 = "New Page Name"
		);

		Pause(locator1 = "120000");

		Navigator.gotoSitePage(pageName = "Home", siteName = "Community Site Name");

		AssertTextEquals(locator1 = "Home#PAGE_2_GUEST_VIEW", value1 = "New Page Name");
	}

	@priority = "4"
	test StagingLocalLiveWorkflow {
		ProductMenu.gotoPortlet(
			category = "Sites",
			panel = "Control Panel",
			portlet = "Sites"
		);

		Site.addCommunityCP(
			siteName = "Community Site Name",
			uncheckPropagation = "true"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		ProductMenu.gotoPortlet(
			category = "Publishing",
			panel = "Site Administration",
			portlet = "Staging"
		);

		Staging.activateStagingCP(
			pageVersioningEnabled = "true",
			siteName = "Community Site Name"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Configuration",
			panel = "Site Administration",
			portlet = "Workflow Configuration"
		);

		Workflow.configureWorkflow(
			workflowDefinition = "Single Approver (Version 1)",
			workflowResourceValue = "Page Revision"
		);

		ProductMenu.gotoSite(site = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Content",
			panel = "Site Administration",
			portlet = "Web Content"
		);

		Workflow.configureWorkflowViaFolderInfo(
			workflowDefinition = "Single Approver (Version 1)"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Roles"
		);

		Role.addCP(roleName = "Staging Admin", roleType = "Site");

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Roles"
		);

		Role.definePermissionsCP(
			permissionDefinitionKeys = "SITE_ADMIN_PAGES_SITE_PAGES_GENERAL_PERMISSIONS_ACTION_CHECKBOX,SITE_ADMIN_PAGES_SITE_PAGES_RESOURCE_PERMISSIONS_SITE_ACTION_CHECKBOX,SITE_ADMIN_PAGES_SITE_PAGES_RESOURCE_PERMISSIONS_PAGE_ACTION_CHECKBOX,SITE_ADMIN_PAGES_SITE_PAGES_RESOURCE_PERMISSIONS_PAGE_VARIATION_ACTION_CHECKBOX,SITE_ADMIN_PAGES_SITE_PAGES_RESOURCE_PERMISSIONS_SITE_PAGES_VARIATION_ACTION_CHECKBOX",
			roleName = "Staging Admin",
			roleType = "Site"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Roles"
		);

		Role.addCP(roleName = "Content Creator", roleType = "Site");

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Roles"
		);

		Role.definePermissionsCP(
			permissionDefinitionKeys = "SITE_ADMIN_CONTENT_WEB_CONTENT_GENERAL_PERMISSIONS_ACTION_CHECKBOX,SITE_ADMIN_CONTENT_WEB_CONTENT_RESOURCE_PERMISSIONS_WEB_CONTENT_ACTION_CHECKBOX,SITE_ADMIN_CONTENT_WEB_CONTENT_RESOURCE_PERMISSIONS_WEB_CONTENT_FOLDER_ACTION_CHECKBOX,SITE_ADMIN_CONTENT_WEB_CONTENT_RESOURCE_PERMISSIONS_WEB_CONTENT_ARTICLE_ACTION_CHECKBOX,SITE_ADMIN_CONTENT_WEB_CONTENT_RESOURCE_PERMISSIONS_WEB_CONTENT_FEED_ACTION_CHECKBOX,SITE_ADMIN_APPLICATIONS_WEB_CONTENT_DISPLAY_APPLICATIONS_PERMISSIONS_ACTION_CHECKBOX,",
			roleName = "Content Creator",
			roleType = "Site"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.addCP(
			userEmailAddress = "contentcreator@liferay.com",
			userFirstName = "userfncreator",
			userLastName = "creator",
			userScreenName = "contentcreator"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.editPasswordCP(
			password = "password",
			userEmailAddress = "contentcreator@liferay.com",
			userScreenName = "contentcreator"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignUserAsMemberCP(
			userFirstName = "userfncreator",
			userLastName = "creator",
			userScreenName = "contentcreator"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignSiteRoleCP(
			resourceName = "userfncreator creator",
			roleName = "Content Creator"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignSiteRoleCP(
			resourceName = "userfncreator creator",
			roleName = "Staging Admin"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.addCP(
			userEmailAddress = "contentapprover@liferay.com",
			userFirstName = "userfnapprover",
			userLastName = "approver",
			userScreenName = "contentapprover"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.editPasswordCP(
			password = "password",
			userEmailAddress = "contentapprover@liferay.com",
			userScreenName = "contentapprover"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignUserAsMemberCP(
			userFirstName = "userfnapprover",
			userLastName = "approver",
			userScreenName = "contentapprover"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		Navigator.gotoStagedView();

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignSiteRoleCP(
			resourceName = "userfnapprover approver",
			roleName = "Site Content Reviewer"
		);

		User.logoutAndLoginPG(
			userLoginEmailAddress = "contentcreator@liferay.com",
			userLoginFullName = "userfncreator creator"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Portlet.addPG(portletName = "Web Content Display");

		WebContent.addWithWorkflowPGViaWCD(
			webContentContent = "Web Content Content",
			webContentTitle = "Web Content Title"
		);

		User.logoutAndLoginPG(
			userLoginEmailAddress = "contentapprover@liferay.com",
			userLoginFullName = "userfnapprover approver"
		);

		Page.gotoMyAccount(portletName = "My Workflow Tasks");

		Workflow.assignToMeTaskByActions(
			workflowAssetTitle = "Web Content Title",
			workflowAssetType = "Web Content Article",
			workflowTask = "Review"
		);

		Workflow.approveTaskByActions(
			workflowAssetTitle = "Web Content Title",
			workflowAssetType = "Web Content Article",
			workflowTask = "Review"
		);

		Navigator.gotoSitePage(pageName = "Home", siteName = "Community Site Name");

		AssertElementNotPresent(
			locator1 = "Portlet#TITLE",
			key_portletName = "Web Content Display"
		);

		User.logoutAndLoginPG(
			userLoginEmailAddress = "contentcreator@liferay.com",
			userLoginFullName = "userfncreator creator"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.submitForPublicationPageRevision();

		User.logoutAndLoginPG(
			userLoginEmailAddress = "contentapprover@liferay.com",
			userLoginFullName = "userfnapprover approver"
		);

		Page.gotoMyAccount(portletName = "My Workflow Tasks");

		Workflow.assignToMeTaskByActions(
			workflowAssetTitle = "Home",
			workflowAssetType = "Page Revision",
			workflowTask = "Review"
		);

		Workflow.approveTaskByActions(
			workflowAssetTitle = "Home",
			workflowAssetType = "Page Revision",
			workflowTask = "Review"
		);

		User.logoutAndLoginPG(
			userLoginEmailAddress = "contentcreator@liferay.com",
			userLoginFullName = "userfncreator creator"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.viewStagingWorkflowStatusPG(
			stagingWorkflowStatus = "Ready for Publication"
		);

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.gotoSitePage(pageName = "Home", siteName = "Community Site Name");

		WebContent.viewPGViaWCD(webContentContent = "Web Content Content");

		User.logoutAndLoginPG(
			userLoginEmailAddress = "contentapprover@liferay.com",
			userLoginFullName = "userfnapprover approver"
		);

		Page.gotoMyAccount(portletName = "My Workflow Tasks");

		Workflow.viewCompletedTask(
			workflowAssetTitle = "Home",
			workflowAssetType = "Page Revision",
			workflowTask = "Review"
		);

		Workflow.viewCompletedTask(
			workflowAssetTitle = "Web Content Title",
			workflowAssetType = "Web Content Article",
			workflowTask = "Review"
		);
	}

	@priority = "5"
	test StagingPublishPage {
		ProductMenu.gotoPortlet(
			category = "Sites",
			panel = "Control Panel",
			portlet = "Sites"
		);

		Site.addCommunityCP(
			siteName = "Community Site Name",
			uncheckPropagation = "true"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Roles"
		);

		Role.addStagingAdminRole();

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.addCP(
			userEmailAddress = "userea@liferay.com",
			userFirstName = "userfn",
			userLastName = "userln",
			userScreenName = "usersn"
		);

		ProductMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations"
		);

		User.editPasswordCP(
			password = "password",
			userEmailAddress = "userea@liferay.com",
			userScreenName = "usersn"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignUserAsMemberCP(
			userFirstName = "userfn",
			userLastName = "userln",
			userScreenName = "usersn"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		ProductMenu.gotoPortlet(
			category = "Members",
			panel = "Site Administration",
			portlet = "Site Memberships"
		);

		Site.assignSiteRoleCP(
			resourceName = "userfn userln",
			roleName = "Staging Admin"
		);

		Navigator.openSiteURL(siteName = "Community Site Name");

		ProductMenu.gotoPortlet(
			category = "Publishing",
			panel = "Site Administration",
			portlet = "Staging"
		);

		Staging.activateStagingCP(
			pageVersioningEnabled = "true",
			siteName = "Community Site Name"
		);

		User.logoutAndLoginPG(
			userLoginEmailAddress = "userea@liferay.com",
			userLoginFullName = "userfn userln"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.addSitePagesVariationPG(
			sitePagesVariationName = "Site Pages Variation Name 1"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.viewSitePagesVariationPG(
			sitePagesVariationName = "Site Pages Variation Name 1"
		);

		Staging.addSitePagesVariationPG(
			sitePagesVariationName = "Site Pages Variation Name 2"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Staging.viewSitePagesVariationPG(
			sitePagesVariationName = "Site Pages Variation Name 2"
		);

		Staging.changeSitePageVariationPG(
			sitePagesVariationMenulistName = "Main Variation",
			sitePagesVariationName = "Site Pages Variation Name 2"
		);

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Community Site Name"
		);

		Portlet.addPG(portletName = "Navigation Menu");

		Staging.markAsReadyForPublication();

		ProductMenuHelper.openProductMenu();

		SitePageNavigator.gotoPages(page = "Public Pages", site = "Community Site Name");

		Page.deletePG(pageName = "Wiki");

		ProductMenu.gotoSite(site = "Community Site Name");

		Navigator.gotoStagedView();

		Staging.gotoPublishToLive();

		Staging.configurePublishToLive(checkPageName = "Home");

		Staging.publishToLive();

		Navigator.gotoSitePage(pageName = "Home", siteName = "Community Site Name");

		Portlet.viewPG(portletName = "Navigation Menu");

		Navigator.gotoSitePage(pageName = "Wiki", siteName = "Community Site Name");

		Portlet.viewPG(portletName = "Wiki");
	}
}