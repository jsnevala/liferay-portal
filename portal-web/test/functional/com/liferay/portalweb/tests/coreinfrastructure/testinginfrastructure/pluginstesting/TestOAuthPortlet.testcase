@component-name = "portal-test-plugins"
definition {
	property portal.release = "true";
	property portal.upstream = "true";
	property testray.main.component.name = "Test Plugins";
	property portlet.plugins.includes = "test-oauth-portlet";
	property test.run.environment = "EE";

	setUp {
		User.firstLoginPG();
	}

	tearDown {
		Page.tearDownPG();
	}

	@priority = "4"
	test ViewOAuth {
		ProductMenu.gotoPortlet(
			category = "Configuration",
			panel = "Control Panel",
			portlet = "OAuth Admin"
		);

		TestOAuth.addApplication(
			applicationName = "oauth1",
			callbackURI = "http://localhost:8080",
			websiteURL = "http://www.liferay.com"
		);

		var applicationCredentials = TestOAuth.getApplicationCredentials(applicationName = "oauth1");

		var consumerSecret = TestOAuth.getConsumerSecret(
			applicationCredentials = "${applicationCredentials}"
		);

		var consumerKey = TestOAuth.getConsumerKey(
			applicationCredentials = "${applicationCredentials}",
			consumerSecret = "${consumerSecret}"
		);

		Page.add(pageName = "Test Page");

		Portlet.addPG(portletName = "Test OAuth");

		TestOAuth.testConsumerKeyAndSecret(
			consumerKey = "${consumerKey}",
			consumerSecret = "${consumerSecret}",
			webID = "liferay.com"
		);

		TestOAuth.viewJSON(domainName = "liferay.com");
	}
}